
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Chimerror Productions - VR Avatars Are Hard</title>
        <meta name="description" content="Chimerror Productions" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Chimerror Productions" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Chimerror Productions" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Merriweather|PT+Sans+Narrow" rel="stylesheet">
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Chimerror Productions" />
        <meta name="msapplication-tooltip" content="Chimerror Productions" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Chimerror Productions - VR Avatars Are Hard" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://chimerror.com/posts/vr-avatars-are-hard" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Chimerror Productions</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About Me</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>VR Avatars Are Hard</h1>
    <div class="meta">        
Published on Tuesday, July 25, 2017<br>            </div>
        <div class="tags">
                    <a role="button" href="/tags/blender" class="btn btn-default btn-xs">blender</a>
                    <a role="button" href="/tags/htc_vive" class="btn btn-default btn-xs">htc_vive</a>
                    <a role="button" href="/tags/leap_motion" class="btn btn-default btn-xs">leap_motion</a>
                    <a role="button" href="/tags/modelling" class="btn btn-default btn-xs">modelling</a>
                    <a role="button" href="/tags/programming" class="btn btn-default btn-xs">programming</a>
                    <a role="button" href="/tags/unity" class="btn btn-default btn-xs">unity</a>
                    <a role="button" href="/tags/virtual_reality" class="btn btn-default btn-xs">virtual_reality</a>
        </div>     
</div>

                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>So the first thing I want in VR is an avatar. That is, I want to have a 3D model follow my body while I’m in VR. You’d think this would be common in VR, but it seems many VR experiences decide to skip it. In some regards, this is because it’s actually pretty hard.</p>
<p>The first issue is that 3D models usually used for games have heads. You can in theory stick the camera into the head, but then you see the backside of head’s faces if it has any. Or as I was running into my most recent case, large eyeballs and modelled bangs. The solution to this is to keep the head “separate” from the body. But if you do that incorrectly, then your model has no head. You need the model to have a head when it’s making a shadow or being viewed in a mirror, but not otherwise. Unity actually has a “shadow only” setting for this, but you end up having to duplicate the head nonetheless. Either way, you need to be able to set this at modelling time, not after you have the model. That puts some limitations on your artist, and limits the ability to use characters modelled by others without some extra work.</p>
<p>The next issue is getting the gaze and body to sync up. This is actually not that hard. You have the model, you can transform it easily, and you have the information from the VR headset. The only things to keep in mind is that you want only the X and Z parts of the position, and only the rotation around the Y axis for the rotation. (We’re using Unity axes here, which are X to the right, Z forward, and Y up.) You might think the Y part of the position would be good for setting the height, but you then run into the next problem...</p>
<p>Height becomes a problem for two reasons. The first is that the position of the headset will move up and down slightly as you move around. The second is the more obvious fact that your players will be of different heights. I had a clever moment where I adjust the scaling of the Y axis so that the player is always the same height as the character. I’ve not moved it over to my new stack yet, but I’ll see if that can be automated rather than hard coded like it is now.</p>
<p>Another problem with an avatar is performing the inverse kinematics (IK) for the hands and gaze. Well, in theory this is a problem, but Unity has IK libraries built in, so map the gaze to where the player is looking, and the hands to the hand controllers, and... Well, it works, but it’s still going to take fiddling.</p>
<p>I’m however, going another level beyond that is kind of hard. I also have a LeapMotion controller, which is actually great at taking in hand motions. But I’ve not gotten that to work yet, I’ll keep playing with it.</p>
<p>Anyway, this was just mainly a test post, but figured I’ll kill two birds with one stone!</p>



                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © 2017 Jayce “Chimerror” Mitchell
                        <br />
                            <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                    </p>
                </div>
        </div>
</div>

                </footer> 

                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

